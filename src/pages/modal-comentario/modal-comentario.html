<!--
  Generated template for the ModalComentarioPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>Comentários</ion-title>
    <ion-buttons end>
      <button ion-button (click)="closeModal()">
        <i class="material-icons">close</i>
      </button>
    </ion-buttons>
  </ion-navbar>

</ion-header>


<ion-content class="black-content">
  <!-- Filme -->
  <div *ngIf="filme">

    <!-- Card -->
    <div class="row filme" style="margin:0px; padding:0px;">
      <div class="col" style="margin:0px; padding:0px;">
        <div class="card" style="margin:0px; padding:0px;">

          <div class="card-image waves-effect waves-block waves-light" style="margin:0px; padding:0px;">
            <img *ngIf="filme.backdrop_path" class="activator" [src]="'https://image.tmdb.org/t/p/w500/' + filme.backdrop_path" />
            <img *ngIf="!filme.backdrop_path" class="activator" [src]="'assets/imgs/background/popcine.jpg'" />
            <span class="shadow card-title" [innerHTML]="filme.title"></span>
          </div>

        </div>
      </div>
    </div>
    <!--/Card -->

    <!-- Tabs -->
    <div class="row linha-tabs">
      <div *ngIf="!tab1" class="col col-tab1 waves-effect waves-light" (click)="activeAba(1)">
        Meu Comentário
      </div>
      <div *ngIf="tab1" class="col col-tab1 active">
        Meu Comentário
      </div>
      <div *ngIf="!tab2" class="col col-tab2 waves-effect waves-light" (click)="activeAba(2)">
        Todos os Comentários
      </div>
      <div *ngIf="tab2" class="col col-tab2 active">
        Todos os Comentários
      </div>
    </div>
    <!--/Tabs -->
    <div class="row" *ngIf="tab1">
      <div class="col">
        <!-- Inserir Comentario -->
        <div class="row" padding *ngIf="!foiComentado">
          <div class="input-field col s12">
            <textarea maxlength="256" id="textarea1" class="materialize-textarea" [(ngModel)]="comentario"></textarea>
            <label for="textarea1" *ngIf="comentario" class="active">Comentário</label>
            <label for="textarea1" *ngIf="!comentario">Comentário</label>
          </div>
          <button ion-button block class="btn-comentario" (click)=enviarComentario()>Enviar Comentário</button>
        </div>
        <!-- Inserir Comentario -->

        <!-- Meu Comentario -->
        <div padding *ngIf="foiComentado">
          <div class="row">
            <div class="col col-comentario" [innerHTML]="comentario"></div>
          </div>
          <div class="row">
            <div class="col s6 col-cresp">
              <i class="material-icons col-icons">textsms</i> {{ cresposta==0 ? 'Não respondida' :(cresposta>1? cresposta + ' Respostas': cresposta +' Resposta')}}
            </div>
            <div class="col s6 col-cdata">
              <i class="material-icons col-icons">timer</i> {{cdata}}</div>
          </div>
        </div>
        <!--/Meu Comentario -->
        <!-- respostas ao meu comentario -->
        <div>
          <div class="row">
            <div class="col center titulo">
              Respostas
            </div>
          </div>
          <div class="row">
            <div class="col" style="padding-top: 20px;" *ngFor="let c of comentarios" class="tr-col">
              <table>
                <tr>
                  <td class="td-col-img">
                    <img class="img-responsive td-col-img-responsive" [src]="'https://graph.facebook.com/'+ c.uid +'/picture?type=normal'" />
                  </td>
                  <td class="td-col-txt">
                    <div class="td-col-txt-pri">{{c.unome}}</div>
                    <div class="td-col-txt-sec">{{c.data}}</div>
                    <div class="row">
                      <div class="col left">
                        Esquerda
                      </div>
                      <div class="col center">
                        Center
                      </div>
                      <div class="col right">
                        Direita
                      </div>
                    </div>
                  </td>
                  <td class="td-col-inf">
                    -
                  </td>
                </tr>
                <tr>
                  <td colspan="3" class="col-linha-com">

                    {{c.comentario}}

                  </td>
                </tr>
              </table>
            </div>
          </div>
        </div>
        <!--/respostas ao meu comentario -->
      </div>
    </div>
    <div class="row" *ngIf="tab2">
      <div class="col">
        <!-- Todos os comentarios -->
        <div>
          <div class="row">
            <div class="col" style="padding-top: 20px;" *ngFor="let c of comentarios" class="tr-col">
              <table>
                <tr>
                  <td class="td-col-img">
                    <img class="img-responsive td-col-img-responsive" [src]="'https://graph.facebook.com/'+ c.uid +'/picture?type=normal'" />
                  </td>
                  <td class="td-col-txt">
                    <div class="td-col-txt-pri">{{c.unome}}</div>
                    <div class="td-col-txt-sec">{{c.data}}</div>
                    <div class="row">
                      <div class="col left">
                        Esquerda
                      </div>
                      <div class="col center">
                        Center
                      </div>
                      <div class="col right">
                        Direita
                      </div>
                    </div>
                  </td>
                  <td class="td-col-inf">
                    -
                  </td>
                </tr>
                <tr>
                  <td colspan="3" class="col-linha-com">

                    {{c.comentario}}

                  </td>
                </tr>
              </table>
            </div>
          </div>
        </div>
        <!--/Todos os comentarios -->
      </div>
    </div>
  </div>
  <!--/Filme -->
</ion-content>